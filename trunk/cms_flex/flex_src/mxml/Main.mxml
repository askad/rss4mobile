<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute"
	xmlns:view="*" creationComplete="InitComponent();">
<mx:ApplicationControlBar dock="true">
	<mx:Label text="XXX system" width="350" id="title"/>
</mx:ApplicationControlBar>
<mx:Label text="{this.nowDate}" top="5" fontSize="12"/>
<mx:Button right="10" top="10" label="Logout" click="logout();"/>
<mx:Script>
	<![CDATA[
		import mx.collections.ArrayCollection;
		import com.tci.exec.ItemBean;
		[Bindable]
		private var nowDate:String = new Date().toDateString();
		[Bindable]
		private var menu_list:ArrayCollection;
		private function checkAuth():void{
		}
		private function InitComponent():void{
			checkAuth();
			menu_list = new ArrayCollection();
			menu_list.addItem(new ItemBean("",0));
			menu_list.addItem(new ItemBean("add",1));
			menu_list.addItem(new ItemBean("search",2));
		}
		private function onMenuClick():void{
			vs_content.selectedIndex = menu.selectedItem.value;
		}
		private function convertMenuState():void{
			if(menu.visible){
				menu.visible = false;
				hb_content.setChildIndex(menu,2);
				menu.width=0;
			}else{
				menu.visible = true;
				hb_content.setChildIndex(menu,0);
				menu.width = this.width*0.27;
			}
		}
		/**
		 * import flash.external.ExternalInterface
		 * 调用js
		 * ExternalInterface.call("function()
		 * 			{window.location.href='http://localhost:8080/Flex_J2eeDemo/bin/Welcome.html';}"); 
		 */
		private function logout():void{
			var url:String = "http://localhost:8080/CMS_Flex/Login.html"; 
            var request:URLRequest = new URLRequest(url); 
            navigateToURL(request,"_top");
		}
	]]>
</mx:Script>
<mx:Metadata>
	[Event(name="moveTo",type="flash.events.Event")]
</mx:Metadata>
<mx:HBox x="0" y="35" width="100%" height="100%" borderStyle="none" id="hb_content">
	<mx:List click="onMenuClick();" id="menu" height="100%"
		labelField="name" dataProvider="{this.menu_list}"
		alpha="0.21" width="27%" styleName="menu" paddingRight="0" paddingLeft="0"></mx:List>
	<mx:Button width="8" height="100%" click="convertMenuState();" label="&lt;&lt;"/>
	<mx:ViewStack width="100%" height="100%" id="vs_content" paddingLeft="0">
		<view:Index id="indexpage" hideEffect="WipeUp" showEffect="WipeDown" paddingLeft="0"></view:Index>
		<view:Add id="addpage" hideEffect="WipeUp" showEffect="WipeDown"></view:Add>
		<view:Search id="searchpage" hideEffect="WipeUp" showEffect="WipeDown"></view:Search>
	</mx:ViewStack>
</mx:HBox>

<mx:Style source="../css/menu.css"/>
</mx:Application>
